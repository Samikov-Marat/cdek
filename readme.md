# Тестовое задание

Фреймворк `Laravel 5.6`

`Bootstrap 4.3.1`

Работоспособность проверялась на

**php 7.2**

**MySql 5.6**

## Инструкция по развертываюнию

1. Создать базу данных. Кодировка `utf8_general`
1. Создать вируальный сервер. Точка входа приложения `/public/index.php`. Настроить файл `hosts` в системе при необходимости.
1. Отредактировать `.env`
    1. Изменить `APP_URL=http://cdek.local` указав свой адрес локального сервера
    1. Изменить `DB_CONNECTION`, `DB_HOST`, `DB_DATABASE`, `DB_USERNAME`, `DB_PASSWORD` и пр. в соответствии с настройками MySql-сервера
1. Для миграции в папке проекта выполнить `php artisan migrate`



## Описание

Файлы

`database/migrations/2019_11_25_173618_create_notes_table.php` Миграция для создания таблицы заметок

`app/Note.php` Модель заметок

`app/NoteAdapter.php` Вспомогательный класс. Добавляет к заметкам адрес api для их удаления

`routes/web.php` Описывает один маршрут. Вызввает контроллер главной страницы 

`routes/api.php` Описывает маршруты для API-контроллера. 

`app/Http/Controllers/HomepageController.php` Контроллер главной страницы. Подготавливает список заметок, показывает главную страницу

`app/Http/Controllers/Api/V1/NotesController.php` Контроллер API. Возвращает список заметок, добавляет и удаляет заметку.

`resources/views/homepage/index.blade.php` Шаблон главной страницы. Минимальная вёрстка.

`resources/assets/js/components/NoteForm.vue` Vue-компонент с формой добавления заметки.

`resources/assets/js/components/NoteIndex.vue` Vue-компонент со списком заметок

`resources/assets/js/components/NoteTableRow.vue` Vue-компонент с одной заметкой из списка

`resources/assets/js/app.js` Подключает vue-компоненты и создаёт vue-приложение `note-app`

## Алгоритм

В приложение добавляются компонент `note-form` и `note-index`.

`note-form` получает параметр `apiUrl` - адрес для оправки данных в api для добавления заметки.

При добавлении новой заметки пользователем `note-form` отправляет POST-запрос на сервер, очищает форму, генерирует событие `change-note-list`. Событие `change-note-list` генерируется на уровне приложения `note-app`, так как обрабатывается в другом компоненте.

`note-index` получает параметр `apiUrl` - адрес для получения списка заметок из api и `notesDefault` - список заметок, которые сейчас уже есть в базе. При событии `change-note-list` перезагружает список заметок, обращаясь к api

С помощью компонента `note-table-row` отображает список заметок с кнопками удаления.  

`note-table-row` оотображает одну заметку в списке с кнопко удаления. При удалении заметки генерирует событие `change-note-list` так же на уровне приложения. 


